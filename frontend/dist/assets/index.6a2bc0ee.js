(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function c(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=c(t);fetch(t.href,i)}})();function w(e){return window.go.main.App.CompilePack(e)}function B(){return window.go.main.App.GetData()}function S(){return window.go.main.App.GetUserSetting()}function z(e,n){return window.go.main.App.Normalize(e,n)}function m(e,n){return window.go.main.App.Notify(e,n)}function A(e){return window.go.main.App.NotifyText(e)}function N(){return window.go.main.App.OpenDirectoryDialogCall()}function C(e){return window.go.main.App.SaveUserSetting(e)}function $(){return window.go.main.App.SelfVersion()}function x(){return window.go.main.App.UninstallApp()}function L(e,n){return window.go.main.App.UpdateScriptVersion(e,n)}function O(e,n,c){return window.runtime.EventsOnMultiple(e,n,c)}function E(e,n){return O(e,n,-1)}function q(e){window.runtime.BrowserOpenURL(e)}const P={default:{"--background-normalize-panel":"rgba(0, 0, 0, 0.5)","--background-color":"#242424","--grid-color":"#ffffff00","--text-color":"#fff","--font-size":"1.5vw","--table-width":"60vw","--table-background":"#171717","--button-background":"#666","--button-hover-background":"#393939","--button-active-background":"#000000","--header-font-size":"4vw","--h2-font-size":"2.5vw","--h3-font-size":"2.75vw","--h3-hover-font-size":"3vw","--h3-hover-color":"#80a2ff","--h4-font-size":"1.5vw","--select-background":"#393939","--select-text-color":"#fff","--default-font":"Arial, sans-serif","--h1-font":"Arial, sans-serif"},light:{"--background-normalize-panel":"rgba(255, 255, 255, 0.5)","--background-color":"#ffffff","--grid-color":"#00000000","--text-color":"#242424","--font-size":"1.5vw","--table-width":"60vw","--table-background":"#d5d5d5","--button-background":"#cacaca","--button-hover-background":"#ffffff","--button-active-background":"#c6c6c6","--header-font-size":"4vw","--h2-font-size":"2.5vw","--h3-font-size":"2.75vw","--h3-hover-font-size":"3vw","--h3-hover-color":"#1654ff","--h4-font-size":"1.5vw","--select-background":"#393939","--select-text-color":"#fff","--default-font":"Arial, sans-serif","--h1-font":"Arial, sans-serif"},minecraft:{"--background-normalize-panel":"rgba(0, 0, 0, 0.5)","--background-color":"#242424","--grid-color":"#ffffff00","--text-color":"#fff","--font-size":"1.3vw","--table-width":"60vw","--table-background":"#171717","--button-background":"#666","--button-hover-background":"#393939","--button-active-background":"#c9c9c9","--header-font-size":"4vw","--h2-font-size":"2.5vw","--h3-font-size":"2.75vw","--h3-hover-font-size":"3vw","--h3-hover-color":"#80a2ff","--h4-font-size":"1.3vw","--select-background":"#393939","--select-text-color":"#fff","--default-font":"Minecraft","--h1-font":"MinecraftTen"},grid:{"--background-normalize-panel":"rgba(0, 0, 0, 0.5)","--background-color":"#242424","--grid-color":"#ffffff10","--text-color":"#fff","--font-size":"1.5vw","--table-width":"60vw","--table-background":"#171717","--button-background":"#666","--button-hover-background":"#393939","--button-active-background":"#000000","--header-font-size":"4vw","--h2-font-size":"2.5vw","--h3-font-size":"2.75vw","--h3-hover-font-size":"3vw","--h3-hover-color":"#80a2ff","--h4-font-size":"1.5vw","--select-background":"#393939","--select-text-color":"#fff","--default-font":"Arial, sans-serif","--h1-font":"Arial, sans-serif"}};let u;function I(e){const n=document.documentElement;for(const[c,r]of Object.entries(e))n.style.setProperty(c,r)}$().then(e=>{document.getElementById("selfVersion").textContent="v"+e});S().then(e=>{u=JSON.parse(e),document.getElementById("saveFormat").value=u.format||"mcaddon",document.getElementById("saveMode").value=u.exportLocation||"desktop",document.getElementById("uiselect").value=u.theme||"default",I(P[u.theme])});function v(e,n){u[e]=n,C(JSON.stringify(u))}function R(e){const n=e.currentTarget;n.textContent==="World Mode"?(n.textContent="Add-On Mode",document.querySelectorAll(".isWorld").forEach(c=>{c.style.display="none"}),document.querySelectorAll(".isNotWorld").forEach(c=>{c.style.display="block"})):(n.textContent="World Mode",document.querySelectorAll(".isWorld").forEach(c=>{c.style.display="block"}),document.querySelectorAll(".isNotWorld").forEach(c=>{c.style.display="none"}))}document.getElementById("modeButton").addEventListener("click",e=>{R(e)});document.getElementById("saveFormat").addEventListener("change",e=>{v("format",e.target.value)});document.getElementById("saveMode").addEventListener("change",e=>{v("exportLocation",e.target.value)});document.getElementById("uiselect").addEventListener("change",e=>{let n=e.target.value;v("theme",n),I(P[n])});async function M(e){var c;const n=[];for(let r=0;r<=3;r++){let t=e[r];const i=r===3?"isWorld":"isNotWorld";let o=`
            <h2 class="${i}">
                ${["Resource Pack","Add-On Pack","Behavior Pack","Worlds","Warning"][r]}
            </h2>
            <table class="${i}">
                <tbody>`;if(t)for(let s=0;s<t.length;s++){const a=t[s],d=a.CleanName,k=(a==null?void 0:a.ScriptState)||((c=a==null?void 0:a.BehaviorPack)==null?void 0:c.ScriptState);let y=k||"null-script";switch(r){case 1:o+=`
                            <tr data-current-version="${y}" data-pack-name="${d}" data-pack-type="addOnPack" data-pack-path="${l(JSON.stringify([a.ResourcePack.Path,a.BehaviorPack.Path]))}" data-pack-signatures="${a.IsSignatures}">
                                <td class="noneData"><img class="projectImage" src="/${l(a.BehaviorPack.Icon)}.png"></td>
                                <td id="textCell" class="averageTextCell">${d}
                                <div class="hiddenAddonAttributes">
                                    <div>
                                        <span class="packNote">Behavior Pack:</span><br>
                                        <span><img class="projectImage" src="/${l(a.BehaviorPack.Icon)}.png"> ${a.BehaviorPack.CleanName}</span>
                                    </div>
                                    <br>
                                    <div>
                                        <span class="packNote">Resource Pack:</span><br>
                                        <span><img class="projectImage" src="/${l(a.ResourcePack.Icon)}.png"> ${a.ResourcePack.CleanName}</span>
                                    </div>
                                </div>
                        `;break;case 3:const p=JSON.parse(h(a.RequiredRP)),g=JSON.parse(h(a.RequiredBP));console.log("requiredBP: ",g),console.log("requiredRP: ",p),o+=`
                            <tr data-pack-name="${d}" data-pack-type="world" data-pack-required-rp="${a.RequiredRP}" data-pack-required-bp="${a.RequiredBP}" data-pack-path="${l(JSON.stringify([a.Path]))}">
                                <td class="noneData"><img class="worldImage" src="/${l(a.Icon)}.png"></td>
                                <td id="textCell" class="averageTextCell">${d}
                                <div class="hiddenAddonAttributes">
                                    <div>
                        `,g.length>0&&(o+='<span class="packNote">Behavior Pack:</span><br>',g.forEach(f=>{o+=`
                                    <span><img class="projectImage" src="/${l(f.Icon)}.png"> ${f.CleanName}</span>
                                `})),o+="</div><br><div>",p.length>0&&(o+='<span class="packNote">Resource Pack:</span><br>',p.forEach(f=>{o+=`
                                    <span><img class="projectImage" src="/${l(f.Icon)}.png"> ${f.CleanName}</span>
                                `})),o+="</div></div>";break;default:o+=`
                            <tr data-current-version="${y}" data-pack-name="${d}" data-pack-type="${r===0?"resourcePack":"behaviorPack"}" data-pack-path="${l(JSON.stringify([a.Path]))}" data-pack-signatures="${a.IsSignatures}">
                                <td class="noneData"><img class="projectImage" src="/${l(a.Icon)}.png"></td>
                                <td id="textCell" class="averageTextCell">${d}
                        `}o+=`
                        </td>
                        <td id="buttonCell1"><button class="updateVersion" style="visibility:hidden;">Update API</button></td>
                        <td id="buttonCell2"><button class="compileButton">Compile</button></td>
                        <td id="buttonCell3" class="normalizeButton"><button class="normalizePack" style="visibility:hidden;">Normalize Pack</button></td>
                    </tr>
                `}o+="</tbody></table>",n.push(o)}return n.join("")}function b(){B().then(e=>{const n=JSON.parse(e);M(n).then(c=>{document.getElementById("table").innerHTML=c,document.getElementById("modeButton").textContent="Add-On Mode",document.querySelectorAll("button").forEach(r=>{r.addEventListener("click",()=>{const t=r.closest("tr"),i=JSON.parse(h(t.getAttribute("data-pack-path")))[0];if(r.classList.contains("updateVersion"))L(t.getAttribute("data-pack-path"),t.getAttribute("data-current-version")).then(o=>{m(o,i)}),b();else if(r.classList.contains("compileButton")){let o={CleanName:t.getAttribute("data-pack-name"),PackType:t.getAttribute("data-pack-type"),PackPath:t.getAttribute("data-pack-path"),ExportPath:"desktop",RequiredRP:t.getAttribute("data-pack-required-rp"),RequiredBP:t.getAttribute("data-pack-required-bp"),Format:document.getElementById("saveFormat").value};document.getElementById("saveFormat").value;const s=JSON.stringify(o);document.getElementById("saveMode").value==="choose"?N().then(a=>{o.ExportPath=a,w(s).then(d=>{m(d,i)})}).catch():w(s).then(a=>{m(a,i)})}else if(r.classList.contains("normalizePack")){document.getElementById("normalizePanel").style.visibility="visible",z(t.getAttribute("data-pack-rp-path"),t.getAttribute("data-pack-bp-path")).then(s=>{s==="Done"&&(A(`Finished Normalizing: ${t.getAttribute("data-pack-name")}`),document.getElementById("normalizePanel").style.visibility="hidden")}),E("stage:name",s=>{document.getElementById("animatingText").textContent=s});let o=[];E("file:rename",s=>{o.push(s),o.length>10&&o.shift(),document.getElementById("normalizePanelText").innerHTML=o.join("<br><br>")})}})}),document.querySelectorAll(".updateVersion").forEach(r=>{let t=r.closest("tr"),i=t.getAttribute("data-current-version");i!=null&&i.endsWith("-beta")&&(r.style.visibility="visible",r.setAttribute("data-pack-path",t.getAttribute("data-pack-path")),r.setAttribute("data-current-version",i))}),document.getElementById("expand").addEventListener("click",()=>{q("https://blockstate.team")})})})}b();document.getElementById("reload").addEventListener("click",()=>{b()});function l(e){const n=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(c,r){return String.fromCharCode("0x"+r)});return btoa(n)}function h(e){const n=atob(e);return decodeURIComponent(n.split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}document.getElementById("uninstall").addEventListener("click",()=>{document.getElementById("uninstallPanel").style.visibility="visible"});document.getElementById("confirmUninstall").addEventListener("click",()=>{x().then(e=>{e!=""&&A(e)})});document.getElementById("cancelUninstall").addEventListener("click",()=>{document.getElementById("uninstallPanel").style.visibility="hidden"});
